{
  "flowEncodingVersion": "1.0",
  "flowContents": {
    "identifier": "a1b2c3d4-0001-4000-8000-000000000001",
    "name": "Transport Monitoring",
    "comments": "Flujos de ingesta: OpenWeather, FlightRadar24, Logs GPS → Kafka. Compatible NiFi 2.7.x. Añadir PutHDFS manualmente si se necesita HDFS.",
    "position": { "x": 0, "y": 0 },
    "processGroups": [],
    "remoteProcessGroups": [],
    "processors": [
      {
        "identifier": "b1b2c3d4-0002-4000-8000-000000000002",
        "name": "OpenWeather InvokeHTTP",
        "comments": "API OpenWeather cada 5 min → raw-data",
        "position": { "x": 100, "y": 50 },
        "type": "org.apache.nifi.processors.standard.InvokeHTTP",
        "bundle": { "group": "org.apache.nifi", "artifact": "nifi-standard-nar", "version": "2.7.2" },
        "properties": {
          "HTTP Method": "GET",
          "Remote URL": "https://api.openweathermap.org/data/2.5/weather?q=Madrid&appid=REPLACE_WITH_API_KEY&units=metric",
          "Connection Timeout": "10 secs",
          "Read Timeout": "10 secs"
        },
        "schedulingPeriod": "5 min",
        "schedulingStrategy": "TIMER_DRIVEN",
        "executionNode": "ALL",
        "penaltyDuration": "30 sec",
        "yieldDuration": "1 sec",
        "concurrentlySchedulableTaskCount": 1,
        "autoTerminatedRelationships": ["failure", "retry", "no retry"],
        "scheduledState": "DISABLED",
        "componentType": "PROCESSOR",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      },
      {
        "identifier": "c1b2c3d4-0003-4000-8000-000000000003",
        "name": "PublishKafka raw-data (OpenWeather)",
        "comments": "",
        "position": { "x": 400, "y": 50 },
        "type": "org.apache.nifi.processors.kafka.pubsub.PublishKafka_2_6",
        "bundle": { "group": "org.apache.nifi", "artifact": "nifi-kafka-nar", "version": "2.7.2" },
        "properties": {
          "Kafka Brokers": "localhost:9092",
          "Topic Name": "raw-data",
          "Delivery Guarantee": "best effort"
        },
        "schedulingPeriod": "0 sec",
        "schedulingStrategy": "TIMER_DRIVEN",
        "executionNode": "ALL",
        "penaltyDuration": "30 sec",
        "yieldDuration": "1 sec",
        "concurrentlySchedulableTaskCount": 1,
        "autoTerminatedRelationships": [],
        "scheduledState": "DISABLED",
        "componentType": "PROCESSOR",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      },
      {
        "identifier": "d1b2c3d4-0004-4000-8000-000000000004",
        "name": "FlightRadar24 InvokeHTTP",
        "comments": "API FlightRadar24 o mock cada 1 min → raw-data",
        "position": { "x": 100, "y": 220 },
        "type": "org.apache.nifi.processors.standard.InvokeHTTP",
        "bundle": { "group": "org.apache.nifi", "artifact": "nifi-standard-nar", "version": "2.7.2" },
        "properties": {
          "HTTP Method": "GET",
          "Remote URL": "https://httpbin.org/get"
        },
        "schedulingPeriod": "1 min",
        "schedulingStrategy": "TIMER_DRIVEN",
        "executionNode": "ALL",
        "penaltyDuration": "30 sec",
        "yieldDuration": "1 sec",
        "concurrentlySchedulableTaskCount": 1,
        "autoTerminatedRelationships": ["failure", "retry", "no retry"],
        "scheduledState": "DISABLED",
        "componentType": "PROCESSOR",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      },
      {
        "identifier": "e1b2c3d4-0005-4000-8000-000000000005",
        "name": "PublishKafka raw-data (FlightRadar24)",
        "comments": "",
        "position": { "x": 400, "y": 220 },
        "type": "org.apache.nifi.processors.kafka.pubsub.PublishKafka_2_6",
        "bundle": { "group": "org.apache.nifi", "artifact": "nifi-kafka-nar", "version": "2.7.2" },
        "properties": {
          "Kafka Brokers": "localhost:9092",
          "Topic Name": "raw-data",
          "Delivery Guarantee": "best effort"
        },
        "schedulingPeriod": "0 sec",
        "schedulingStrategy": "TIMER_DRIVEN",
        "executionNode": "ALL",
        "penaltyDuration": "30 sec",
        "yieldDuration": "1 sec",
        "concurrentlySchedulableTaskCount": 1,
        "autoTerminatedRelationships": [],
        "scheduledState": "DISABLED",
        "componentType": "PROCESSOR",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      },
      {
        "identifier": "f1b2c3d4-0006-4000-8000-000000000006",
        "name": "GetFile GPS Logs",
        "comments": "Lee JSON desde directorio local → Kafka filtered-data",
        "position": { "x": 100, "y": 400 },
        "type": "org.apache.nifi.processors.standard.GetFile",
        "bundle": { "group": "org.apache.nifi", "artifact": "nifi-standard-nar", "version": "2.7.2" },
        "properties": {
          "Input Directory": "/home/hadoop/data/gps_logs",
          "File Filter": ".*\\.jsonl?",
          "Keep Source File": "false",
          "Polling Interval": "5 sec"
        },
        "schedulingPeriod": "5 sec",
        "schedulingStrategy": "TIMER_DRIVEN",
        "executionNode": "ALL",
        "penaltyDuration": "30 sec",
        "yieldDuration": "1 sec",
        "concurrentlySchedulableTaskCount": 1,
        "autoTerminatedRelationships": [],
        "scheduledState": "DISABLED",
        "componentType": "PROCESSOR",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      },
      {
        "identifier": "a2b2c3d4-0007-4000-8000-000000000007",
        "name": "PublishKafka filtered-data",
        "comments": "",
        "position": { "x": 420, "y": 400 },
        "type": "org.apache.nifi.processors.kafka.pubsub.PublishKafka_2_6",
        "bundle": { "group": "org.apache.nifi", "artifact": "nifi-kafka-nar", "version": "2.7.2" },
        "properties": {
          "Kafka Brokers": "localhost:9092",
          "Topic Name": "filtered-data",
          "Delivery Guarantee": "best effort"
        },
        "schedulingPeriod": "0 sec",
        "schedulingStrategy": "TIMER_DRIVEN",
        "executionNode": "ALL",
        "penaltyDuration": "30 sec",
        "yieldDuration": "1 sec",
        "concurrentlySchedulableTaskCount": 1,
        "autoTerminatedRelationships": [],
        "scheduledState": "DISABLED",
        "componentType": "PROCESSOR",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      }
    ],
    "inputPorts": [],
    "outputPorts": [],
    "connections": [
      {
        "identifier": "conn-1-openweather-to-kafka",
        "name": "",
        "source": { "id": "b1b2c3d4-0002-4000-8000-000000000002", "type": "PROCESSOR", "groupId": "a1b2c3d4-0001-4000-8000-000000000001", "name": "OpenWeather InvokeHTTP" },
        "destination": { "id": "c1b2c3d4-0003-4000-8000-000000000003", "type": "PROCESSOR", "groupId": "a1b2c3d4-0001-4000-8000-000000000001", "name": "PublishKafka raw-data (OpenWeather)" },
        "selectedRelationships": ["success"],
        "backPressureObjectThreshold": 10000,
        "backPressureDataSizeThreshold": "1 GB",
        "flowFileExpiration": "0 sec",
        "componentType": "CONNECTION",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      },
      {
        "identifier": "conn-2-flightradar-to-kafka",
        "name": "",
        "source": { "id": "d1b2c3d4-0004-4000-8000-000000000004", "type": "PROCESSOR", "groupId": "a1b2c3d4-0001-4000-8000-000000000001", "name": "FlightRadar24 InvokeHTTP" },
        "destination": { "id": "e1b2c3d4-0005-4000-8000-000000000005", "type": "PROCESSOR", "groupId": "a1b2c3d4-0001-4000-8000-000000000001", "name": "PublishKafka raw-data (FlightRadar24)" },
        "selectedRelationships": ["success"],
        "backPressureObjectThreshold": 10000,
        "backPressureDataSizeThreshold": "1 GB",
        "flowFileExpiration": "0 sec",
        "componentType": "CONNECTION",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      },
      {
        "identifier": "conn-3-getfile-to-kafka",
        "name": "",
        "source": { "id": "f1b2c3d4-0006-4000-8000-000000000006", "type": "PROCESSOR", "groupId": "a1b2c3d4-0001-4000-8000-000000000001", "name": "GetFile GPS Logs" },
        "destination": { "id": "a2b2c3d4-0007-4000-8000-000000000007", "type": "PROCESSOR", "groupId": "a1b2c3d4-0001-4000-8000-000000000001", "name": "PublishKafka filtered-data" },
        "selectedRelationships": ["success"],
        "backPressureObjectThreshold": 10000,
        "backPressureDataSizeThreshold": "1 GB",
        "flowFileExpiration": "0 sec",
        "componentType": "CONNECTION",
        "groupIdentifier": "a1b2c3d4-0001-4000-8000-000000000001"
      }
    ],
    "labels": [],
    "funnels": [],
    "variables": {},
    "defaultFlowFileExpiration": "0 sec",
    "defaultBackPressureObjectThreshold": 10000,
    "defaultBackPressureDataSizeThreshold": "1 GB",
    "flowFileConcurrency": "UNBOUNDED",
    "flowFileOutboundPolicy": "STREAM_WHEN_AVAILABLE",
    "componentType": "PROCESS_GROUP"
  },
  "externalControllerServices": {},
  "parameterContexts": {}
}
